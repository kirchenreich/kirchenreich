/* Raven.js v0.7.1 | https://github.com/getsentry/raven-js/ */
function parseUri(e){var d=parseUri.options,a=d.parser[d.strictMode?"strict":"loose"].exec(e),c={},b=14;while(b--){c[d.key[b]]=a[b]||""}c[d.q.name]={};c[d.key[12]].replace(d.q.parser,function(g,f,h){if(f){c[d.q.name][f]=h}});return c}parseUri.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};(function(){var a=this;var d;a.Raven=d={};var b=d;d.VERSION="0.7.1";var c=a.jQuery||a.Zepto||a.ender;if(typeof(c)==="undefined"){throw"Raven requires one of the following libraries: jQuery, Zepto, or ender"}if(a.jQuery===c&&c.fn.jquery<"1.5.0"){throw"A newer version of jQuery is required"}d.options={secretKey:undefined,publicKey:undefined,servers:[],projectId:1,logger:"javascript",site:undefined,dataCallback:null,signatureUrl:undefined,fetchHeaders:false,testMode:false,ignoreErrors:[],ignoreUrls:[]};d.funcNameRE=/function\s*([\w\-$]+)?\s*\(/i;d.config=function(e){var f=[];if(typeof(e)==="string"){if(e.indexOf("http")===0){e=d.parseDSN(e)}else{throw"Base64 encoded config is no longer supported - use DSN"}}c.each(e,function(g,h){b.options[g]=h});c.each(b.options.servers,function(g,h){if(h.slice(-1)!=="/"){h+="/"}f.push(h+"api/"+b.options.projectId+"/store/")});b.options.servers=f};d.parseDSN=function(f){var h=parseUri(f);var g=h.path.lastIndexOf("/");var e;var i;if(g===-1){e=h.path.substr(1);i=""}else{i=h.path.substr(1,g);e=h.path.substr(g+1)}return{servers:[h.protocol+"://"+h.host+":"+h.port+"/"+i],publicKey:h.user,secretKey:h.password,projectId:e}};d.getHeaders=function(){var e={};if(b.options.fetchHeaders&&!b.options.testMode){e=c.ajax({type:"HEAD",url:a.location,async:false}).getAllResponseHeaders()}e.Referer=document.referrer;e["User-Agent"]=navigator.userAgent;return e};d.parseHeaders=function(e){var f={};c.each(e.split("\n"),function(h,k){var g=k.slice(0,k.indexOf(":")),j=k.slice(k.indexOf(":")+2);f[g]=j});return f};d.getSignature=function(e,f,g){if(b.options.signatureUrl){c.ajax({type:"POST",url:b.options.signatureUrl,data:{message:e,timestamp:f},dataType:"json",success:function(h){g(h.signature)}})}else{g()}};d.getAuthHeader=function(e,f){var g="Sentry sentry_version=2.0, ";g+="sentry_timestamp="+f+", ";g+="sentry_client=raven-js/"+b.VERSION;if(b.options.publicKey){g+=", sentry_key="+b.options.publicKey}if(e){g+=", sentry_signature="+e}return g};d.captureException=function(k,h){var g,j,i,f;if(k.line){j=k.line}else{if(k.lineNumber){j=k.lineNumber}}if(k.sourceURL){i=k.sourceURL}else{if(k.fileName){i=k.fileName}}if(k["arguments"]&&k.stack){f=b.chromeTraceback(k)}else{if(k.stack){if(k.stack.indexOf("@")==-1){f=b.chromeTraceback(k)}else{f=b.firefoxOrSafariTraceback(k)}}else{f=[{filename:i,lineno:j}];f=f.concat(b.otherTraceback(d.captureException))}}b.process(k,i,j,f,h)};d.captureMessage=function(g,e){var f=b.arrayMerge({message:g},e);b.send(f)};d.process=function(n,l,e,f,o){var j,m,k,h;if(typeof(n)==="object"){j=n.name;n=n.message}if(c.inArray(n,b.options.ignoreErrors)>=0){return}if(f){m={frames:f};l=l||f[0].filename}else{if(l){m={frames:[{filename:l,lineno:e}]}}}for(var g=0;g<b.options.ignoreUrls.length;g++){if(b.options.ignoreUrls[g].test(l)){return}}k=e?n+" at "+e:n;h=b.arrayMerge({"sentry.interfaces.Exception":{type:j,value:n},"sentry.interfaces.Stacktrace":m,culprit:l,message:k},o);b.send(h)};d.arrayMerge=function(f,e){if(typeof(e)==="undefined"){return f}c.each(e,function(g,h){f[g]=h});return f};d.trimString=function(e){return e.replace(/^\s+|\s+$/g,"")};d.chromeTraceback=function(l){var m,j,g,k,i,h=[],f=l.stack.split("\n");c.each(f.slice(1),function(n,e){m=d.trimString(e).slice(3);if(m=="unknown source"){return}else{m=m.split(" ")}if(m.length>2){j=m[0];g=m.slice(1).join(" ");k="(unknown)"}else{if(m.length==2){j=m[0];g=m[1]}else{j="(unknown)";g=m[0]}}if(g&&g!=="(unknown source)"){if(g[0]==="("){g=g.slice(1,-1)}i=g.split(":");k=i[2];g=i.slice(0,2).join(":")}h.push({"function":j,filename:g,lineno:k})});return h};d.firefoxOrSafariTraceback=function(l){var m,j,i,g,k,h=[],f=l.stack.split("\n");c.each(f,function(n,e){if(e){m=e.split("@");if(m[0]){j=m[0].split("(");if(j.length>1&&j[1]!=")"){i=j[1].slice(0,-1).split(",")}else{i=undefined}if(j[0]){j=j[0]}else{j="(unknown)"}}else{j="(unknown)"}if(m.length>1){g=m[1].split(":");k=g.slice(-1)[0];g=g.slice(0,-1).join(":")}else{if(m[0]=="[native code]"){j="(unknown)";g="[native code]";k=0;i=undefined}}h.push({"function":j,filename:g,lineno:k,vars:{"arguments":i}})}});return h};d.otherTraceback=function(j){var i,h,f="<anonymous>",g=[],e=9;while(j&&g.length<e){i=j.name||(b.funcNameRE.test(j.toString())?RegExp.$1||f:f);if(j["arguments"]){h=b.stringifyArguments(j["arguments"])}else{h=undefined}g.push({filename:"(unknown source)",lineno:"(unknown)","function":i,post_context:j.toString().split("\n"),vars:{"arguments":h}});j=j.caller}return g};d.stringifyArguments=function(f){var i,e=this,h="<unknown>",g=[];c.each(f,function(k,j){if(j===undefined){g.push("undefined")}else{if(j===null){g.push("null")}else{if(j instanceof Array){g.push(e.stringifyArguments(j))}else{if(j.constructor){i=j.constructor.name||(e.funcNameRE.test(j.constructor.toString())?RegExp.$1||h:h);if(i=="String"){g.push('"'+j+'"')}else{if(i=="Number"||i=="Date"){g.push(j)}else{if(i=="Boolean"){g.push(j?"true":"false")}else{g.push(i)}}}}else{g.push(h)}}}}});return g};d.pad=function(h,g){var f,e=(""+h).length;if(typeof(g)==="undefined"){g=2}if(e>=g){return h}for(f=0;f<(g-e);f++){h="0"+h}return h};d.dateToISOString=function(e){if(Date.prototype.toISOString){return e.toISOString()}return e.getUTCFullYear()+"-"+b.pad(e.getUTCMonth()+1)+"-"+b.pad(e.getUTCDate())+"T"+b.pad(e.getUTCHours())+":"+b.pad(e.getUTCMinutes())+":"+b.pad(e.getUTCSeconds())+"."+b.pad(e.getUTCMilliseconds(),3)+"Z"};d.send=function(h){var i,g=new Date().getTime(),f=a.location.protocol+"//"+a.location.host+a.location.pathname,e=a.location.search.slice(1);h=b.arrayMerge({project:b.options.projectId,logger:b.options.logger,site:b.options.site,timestamp:new Date(),"sentry.interfaces.Http":{url:f,querystring:e,headers:b.getHeaders()}},h);if(typeof(b.options.dataCallback)=="function"){h=b.options.dataCallback(h)}h.timestamp=b.dateToISOString(h.timestamp);i=JSON.stringify(h);b.getSignature(i,g,function(j){var k=b.getAuthHeader(j,g);c.each(b.options.servers,function(l,m){c.ajax({type:"POST",url:m,data:i,dataType:"json",headers:{"X-Sentry-Auth":k,Authentication:k}})})})}}).call(this);